
@{
    ViewBag.Title = "房源发布";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript" src="~/Content/js/date.js"></script>
<script type="text/javascript" src="~/Content/js/iscroll.js"></script>

<style>
    .schetong_box ul li input[type="number"], .schetong_box ul li input[type="text"] {
        border: 0;
        padding-left: 10px;
        line-height: 22px;
        width: 70%;
        text-align: right;
        float: right;
    }

    .schetong_box ul li a:after {
        content: "";
        font-family: "" !important;
        padding-left: 0px;
        color: #fff;
    }
</style>
<form class="layui-form">
    <div class="container">
        <div class="search_listheader" style="background:#fff">
            <div class="search_listheader_l" onclick="return history.go(-1);"><i class="iconfont icon-jiantou-copy1"></i></div>
            <h2> 发布出租房源</h2>

        </div>
        <div class="schetong_box input_right">
            <h3>小区信息</h3>
            <ul>
                <li><span>名称</span><input type="text" placeholder="请输入名称" id="AreasName" name="AreasName" lay-verify="required" lay-reqmsg="请输入名称"></li>
                <li><span>地址</span><input type="text" placeholder="请输入地址" id="DetailAddress" name="DetailAddress" lay-verify="required" lay-reqmsg="请输入地址"></li>
               @* <li id="RentMode" name="RentMode"><span>出租类型</span><a class="xingbie_chose cur" href="javascript:;" data-value="整租">整租</a><a class="xingbie_chose" href="javascript:;" data-value="合租">合租</a></li>*@
            </ul>
        </div>
        <div class="schetong_box input_right">
            <h3>房源描述</h3>
            <ul>
                <li><span>楼栋</span><input type="number" placeholder="请输入楼号" id="BuildingNO" name="BuildingNO" lay-verify="required" lay-reqmsg="请输入楼号"></li>
                <li><span>室号</span><input type="number" placeholder="请输入室号" id="RoomNO" name="RoomNO" lay-verify="required" lay-reqmsg="请输入室号"></li>
                <li><span>户型</span><input type="text" placeholder="请输入户型" id="beginTime" name="beginTime"></li>
               @* <li><span>房源面积</span><input type="number" placeholder="请输入面积" id="RentalArea" name="RentalArea" lay-verify="required" lay-reqmsg="请输入面积"></li>*@
            </ul>
        </div>
        <div class="schetong_box input_right">
            <h3>期望租金</h3>
            <ul>
                <li><span>月租金</span><input type="number" placeholder="请输入你的期望月租金" id="HRent" name="HRent" lay-verify="required" lay-reqmsg="请输入你的期望月租金"></li>
            </ul>
        </div>
        <div class="schetong_box input_right">
            <h3>业主信息</h3>
            <ul>
                <li id="xingbie">
                    <span>姓名</span><input style="width:100px; float:left;text-align: left;" type="text" placeholder="请输入您的姓名" value="" id="UserRealName" name="UserRealName" lay-verify="required" lay-reqmsg="请输入您的姓名">
                    <a class="xingbie_chose" href="javascript:;">女士</a><a class="xingbie_chose cur" href="javascript:;">先生</a>
                </li>
                <li><span>电话</span><input style="width:auto; text-align:left; float:left" type="text" value="137****5678" id="telphone"></li>
            </ul>
        </div>


    </div>
    <div class="fb_renttips"><i class="iconfont icon-iconfontqueren2"></i>《房东委托服务协议》</div>
    <div class="btmline"></div>
    <div class="detail_btmset">
        <div class="detail_btmset_part2" style="width:100%">
            <a style="width:100%" class="detail_btm_btn bg1" href="javascript:;" onclick="submithosue()">提交并完善资料</a>

        </div>

    </div>
    <input type="hidden" name="HRoom" id="HRoom" />
    <input type="hidden" name="HOffice" id="HOffice" />
    <input type="hidden" name="HWashroom" id="HWashroom" />
    <div id="datePlugin"></div>
</form>
<script>
    $(function () {
        $('#beginTime').date();

        $('#xingbie a').each(function (index, obj) {
            $(obj).click(function () {
                $(obj).addClass('cur').siblings('a').removeClass('cur');
            });
        });
        $('#RentMode a').each(function (index, obj) {
            $(obj).click(function () {
                $(obj).addClass('cur').siblings('a').removeClass('cur');
            });
        });
        if (CheckUserLog()) {
            //加载用户相关数据
            try {
                $.ar({
                    url: globalKey.InterfaceDomain + 'api/Users/GetUserInfo?userId=' + $('#Uid').val()
                               , data: { userId: $('#Uid').val() }
                               , success: function (data) {
                                   $("#xingbie input").val(data.data.userRealName);
                                   $("#telphone").val(data.data.logAccount.substring(0, 3) + "****" + data.data.logAccount.substring(8, 11));

                               }
                });
            } catch (e) {
                console.log(e.message);
            }
        }
    });
    function submithosue() {//组装data
       
                var data = {
                    AreasName: $("#AreasName").val(),
                    DetailAddress: $("#DetailAddress").val(),
                    RentMode: $("#RentMode a.cur").data("value"),
                    BuildingNO: $("#BuildingNO").val(),
                    RoomNO: $("#RoomNO").val(),
                    RentalArea: $("#RentalArea").val(),
                    HRoom: $("#HRoom").val(),
                    HOffice: $("#HOffice").val(),
                    HWashroom: $("#HWashroom").val(),
                    HRent: $("#HRent").val(),
                    UserIdEncrypt: $("#Uid").val(),
                }
                if (data["AreasName"]=="") {
                    $.modalAlert("请输入小区名字");
                    $("#AreasName").focus();
                    return;
                }
                if (data["DetailAddress"] == "") {
                    $.modalAlert("请输入小区地址");
                    $("#DetailAddress").focus();
                    return;
                }
                if (data["BuildingNO"] == "") {
                    $.modalAlert("请输入楼号");
                    $("#BuildingNO").focus();
                    return;
                }
                if (data["RoomNO"] == "") {
                    $.modalAlert("请输入室号");
                    $("#RoomNO").focus();
                    return;
                }
                if (data["HRoom"] == "") {
                        $.modalAlert("请选择户型");
                        $("#beginTime").trigger("click");//.focus();
                        return;
                }
                //if (data["RentalArea"] == "") {
                //    $.modalAlert("请输入出租面积");
                //    $("#RentalArea").focus();
                //    return;
                //}
                if (data["HRent"] == "") {
                    $.modalAlert("请输入期望租金");
                    $("#HRent").focus();
                    return;
                }
                try {
                    $.ar({
                        url: globalKey.InterfaceDomain + "api/house/add"
                                   , data: data
                                   , success: function (data) {
                                       if (data.code == 200) {
                                           location.href = "/house/pushmore/" + data.data;
                                       }

                                   }
                    });
                } catch (e) {
                    console.log(e.message);
                }
          
    };
    $(".fb_renttips").click(function () {
        window.location.href = "/house/protocol";

        str = '<p style="text-align: left;margin-left: 18px;">指房向是由上海知房网络科技有限公司其关联公司（简称“指房向”）向用户提供房地产相关服务的APP客户端、网站或软件系统，通过房源真实的展示，精准的推荐配对，快捷的完成房屋出租。本协议由房东用户（以下简称“用户”）和指房向签订。</p>' +
              '<p style="text-align: left;margin-left: 18px;"> 第一条、 依据国家有关法律、法规和本市有关规定，双方在自愿、平等和协商一致的基础上，就指房向为用户提供信息服务，让用户通过指房向APP平台发布出租房地产信息事宜达成一致，订立本协议。</p>' +
              '<p style="text-align: left;margin-left: 18px;"> 第二条、 用户应保证如下事项：</p>' +
            '<p style="text-align: left;margin-left: 33px;">   1、 对出租房屋拥有合法完整的所有权或处分权；</p>' +
            '<p style="text-align: left;margin-left: 33px;">   2、 对于出租房屋提供的信息真实、准确、完整，符合正常居住条件，处于可出租状态，房屋质量、安全情况符合国家标准；</p>' +
            '<p style="text-align: left;margin-left: 33px;">   3、 向指房向提交必要的材料（包括但不限于房屋所有权证、产权人身份证件、产权人委托书、产权人同意转租的法律文件等）均真实有效；</p>' +
            '<p style="text-align: left;margin-left: 33px;">   4、 同意按照与指房向的约定支付信息服务费，接受指房向可能实施的阶段性补贴或优惠政策。目前，房东无需在达成交易后支付信息服务费或其他费用，指房向后续如有变动将及时通知用户，用户如不接受的可停止使用APP，继续使用的则视为无条件接受。</p>' +
            '<p style="text-align: left;margin-left: 33px;">   5、确保对房屋的出租符合法律规定，在出租过程中不得做出违反法律的行为。</p>' +
            '<p style="text-align: left;margin-left: 33px;">   6、签订本协议后，用户不得再通过其他任何第三方出租该房屋，服务期限为自用户在指房向挂牌出租之日起   个月内，不得提前擅自解除出租信息。到期后如未书面提出解除的，自动延续   个月。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第三条、 指房向承诺不故意向用户提供与成交有关的虚假信息，不隐瞒与成交有关的重要事实，不与他人恶意串通侵害用户的利益。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第四条、出租价格为用户在指房向对外挂牌的价格，用户有权对该出租价格进行变更，但是应提前15天告知指房向方可进行操作。最终实际成交价格以用户与在指房向注册的租客签订的具体协议/合同为准。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第五条、 用户同意本协议即视为同意通过指房向发布出租相关房地产的信息。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第六条、 用户与通过指房向接触的租客（包括与其有关联的人），在取得联系后   个月内最终达成租赁协议的，都视为指房向完成服务事项，用户应当立即告知指房向。用户不得私自与租客（包括与其有关联的人）自行或通过其他平台签订、履行租赁协议。如用户违反本条的，无论指房向是否向租客主张过损失，都有权直接向用户要求赔偿损失，并承担诉讼费、律师费、调查费等维权费用，双方确认损失按一万元计，律师费按五仟元计。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第七条、 如因用户提前解除本协议，将导致指房向房源失真，对指房向商业信誉及商业利益造成损失，用户应当赔偿指房向损失及诉讼费、律师费、调查费等维权费用，双方确认损失按三万元计，律师费按一万元计。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第八条、 指房向仅是信息服务平台，用户与第三方产生纠纷的，与指房向无关，用户应向第三方主张权利，如需指房向协助或提供支持的，可另行协商。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第九条、 因本协议产生的纠纷，双方应友好协商解决，协商不成的，可向指房向所在地人民法院起诉。</p>' +
            '<p style="text-align: left;margin-left: 18px;">第十条、一旦用户点击确认本协议，本协议即构成对双方有约束力的法律文件，如本协议的约定与其他约定冲突的，以本协议为准。</p>'
        
      layui.use(['laytpl'], function () {
          var laytpl = layui.laytpl;
          var getTpl = '<div style="padding-top: 46px;">' + str + '</div>';
          laytpl(getTpl).render(getTpl,function (contentHtml) {
              var headHtml = '<div class="search_listheader" style="background:#fff" ><div class="search_listheader_l" onclick="$.modalCloseALL();"><i class="icon iconfont icon-2"></i></div><h2>  指房向房东用户信息服务协议 </h2></div>';
              //var footHtml = '<div class="btmline" style="height:15em;"></div>';
              var AllHtml = '<div style="height:' + $('body').height() * 0.99 + 'px;overflow:auto;">' + headHtml + contentHtml  + '</div>';
              $.modalPage({ html: AllHtml });
          });
      })
    });
</script>