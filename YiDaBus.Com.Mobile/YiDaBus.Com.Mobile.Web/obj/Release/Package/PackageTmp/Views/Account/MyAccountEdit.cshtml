
@{
    ViewBag.Title = "信息修改";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <input value="@ViewData["type"]" type="hidden"/>
    @if (ViewData["type"].ToString().Equals("name"))
    {
        <style>
            /*修改姓名局部样式*/
            .schetong_box ul li a:after {
                content: "\e606";
            }
        </style>
        <div class="search_listheader" style="background:#fff" onclick="window.location.href = '/Account/MyAccount'">
            <div class="search_listheader_l"><i class="iconfont icon-jiantou-copy1"></i></div>
            <h2> 修改姓名</h2>
        </div>
        <div class="schetong_box" style="padding-top: 45px;">
            <ul>
                <li><input id="UserRealName" style="width:50%" type="text" value="@ViewData["uname"]"><a onclick="clearname();" href="javascript:void(0);"></a></li>
            </ul>
        </div>
    }
    else
    {
        <style>
            /*修改性别局部样式*/
            .schetong_box ul li a:after {
                content: "";
                padding: 0;
            }
        </style>
        <div class="search_listheader" style="background:#fff">
            <div class="search_listheader_l"  onclick="window.location.href = '/Account/MyAccount'"><i class="iconfont icon-jiantou-copy1"></i></div>
            <h2> 修改性别</h2>
        </div>
        <div class="schetong_box" style="padding-top: 45px;">
            <ul>
                <li id="gender"><span>性   别</span><a class="xingbie_chose" href="javascript:void(0);">女士</a><a class="xingbie_chose cur" href="javascript:void(0);">先生</a></li>
            </ul>
        </div>
    }
    <div class="login_btm" style="padding-top:25px;">
        <a id="btnSave" class="login_btn bgred" href="javascript:void(0);" style="border-radius:2px; margin-left:15px; margin-right:15px; width:auto">保存</a>
    </div>

    <input id="hidName" type="hidden" />
    <input id="hidGender" type="hidden" value="@ViewData["ugender"]"/>
</div>



<script type="text/javascript">
    $(function () {
        //性别切换
        $("#hidName").val($.request("uname"));
        $('#gender>a').each(function (index, obj) {
            if ($(obj).text() == $('#hidGender').val()) {
                $(obj).addClass('cur').siblings('a').removeClass('cur');
            }
            $(obj).click(function () {
                $(obj).addClass('cur').siblings('a').removeClass('cur');
            });
        });
    })


    $(document).ready(function () {
        //提交保存
        $("#btnSave").click(function () {
            var name=$("#UserRealName").val();
            var gender = $("#gender a.cur").text();
            var data;
            $.ar({
                url: globalKey.InterfaceDomain + 'api/Users/CompleteUserInfo'
                               , type: 'post'
                               , data: { userId: $('#Uid').val(), UserRealName: name, UserGender: gender }
                               , success: function (result) {
                                   window.location.href = "/Account/MyAccount";
                               }
            });
        });
    });

    //清除
    function clearname() {
        $("#UserRealName").val("");
    }


</script>

